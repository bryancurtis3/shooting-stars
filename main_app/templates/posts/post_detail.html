{% extends 'base.html' %}
{% load static %}
{% load sass_tags %}

{% block styles %}
<link rel="stylesheet" href="{% sass_src 'styles/posts/post_detail.scss'%}">
{% endblock styles %}

{% block scripts %}
<script src="{% static 'scripts/posts.js'%}" defer></script>
{% endblock scripts %}

{% block content %}

<!-- Post Display -->
<article class="post">
    <div class="main-title">
        <h3 class="title">{{post.title}}</h3>
        <a href="https://www.google.com/maps/place/{{post.lat}},{{post.long}}" target="_blank" title="See on Google Maps">
            <i class="fas fa-map-marker-alt"></i>
        </a>
    </div>
    
    <div class="subtitle">
        <h4>{{post.user.username}}</h4>
        <a class="coords" href="/posts/?q={{post.lat|slice:5}}%2C+{{post.long|slice:6}}" title="Search posts from this area">{{post.lat}}, {{post.long}}</a>
    </div>
        <a href="{{post.image}}" target="_blank" title="See full sized image">
            <img src="{{post.image}}" alt="Post image">
        </a>
    <p class="description">
        {{post.description}}
    </p>
    
    <button onClick="modal()">Delete</button>
    <button onClick="edit()">Edit</button>
</article>

<!-- Delete Modal -->
<div class="overlay" onClick="edit()"></div>
<form class="modal" action="{% url 'post_delete' post.pk %}" method="POST">
       {% csrf_token %}
       <h2>Are you sure you want to delete this post?</h2>
        <a class="button" role="button" onclick="modal()">Cancel</a>
       <button>Delete</button>
</form>

<form class="edit" action="{% url 'post_update' post.pk %}" method="POST">
    <h3>Edit Your Post</h3>
    {% csrf_token %}
    {{form.as_p}}
    <div class="buttons">
        <button onClick="edit()">Cancel</button>
        <input class="button" type="submit" value="Submit"></input>
    </div>
</form> 


{% endblock content %}